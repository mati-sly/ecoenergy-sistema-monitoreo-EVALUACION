# ğŸŒ± EcoEnergy - Sistema de Monitoreo EnergÃ©tico

Sistema web de monitoreo energÃ©tico desarrollado en Django para evaluaciÃ³n acadÃ©mica. Permite a las empresas gestionar dispositivos IoT, monitorear consumo energÃ©tico y recibir alertas en tiempo real.

## ğŸ“‹ CaracterÃ­sticas Principales

### âœ… Funcionalidades Implementadas

#### ğŸ“Š **Dashboard Principal (HU1)**

- Contadores por categorÃ­a y zona
- Resumen de alertas por severidad
- Ãšltimas mediciones registradas
- Interfaz con diseÃ±o Frutiger Aero (gradientes celeste-verde)

#### ğŸ”§ **GestiÃ³n de Dispositivos (HU2-HU3)**

- Lista de dispositivos con filtro por categorÃ­a
- Detalle completo de cada dispositivo
- VisualizaciÃ³n de mediciones y alertas asociadas
- Estados de funcionamiento en tiempo real

#### ğŸ“ˆ **Historial de Mediciones (HU4)**

- Lista completa de mediciones histÃ³ricas
- Filtros por fecha y dispositivo
- Valores de consumo energÃ©tico detallados

#### ğŸš¨ **Sistema de Alertas (HU5)**

- Resumen de alertas por severidad
- Alertas de la semana actual
- ClasificaciÃ³n por niveles (Info, Warning, Critical)

#### ğŸ” **Sistema de AutenticaciÃ³n (HU6-HU8)**

- Login de usuarios
- Registro de empresas con verificaciÃ³n por email
- RecuperaciÃ³n de contraseÃ±a con cÃ³digos de verificaciÃ³n
- ProtecciÃ³n de vistas con autenticaciÃ³n requerida

## ğŸ—ï¸ Arquitectura del Proyecto

### ğŸ“ Estructura de Directorios

```
monitoreo/
â”œâ”€â”€ db.sqlite3                      # Base de datos SQLite
â”œâ”€â”€ manage.py                       # Script de gestiÃ³n Django
â”œâ”€â”€ monitoreo/                      # ConfiguraciÃ³n principal
â”‚   â”œâ”€â”€ settings.py                 # Configuraciones
â”‚   â”œâ”€â”€ urls.py                     # URLs principales
â”‚   â””â”€â”€ wsgi.py                     # WSGI config
â”œâ”€â”€ dispositivos/                   # App principal - modelos de negocio
â”‚   â”œâ”€â”€ models.py                   # Organization, Device, Measurement, Alert
â”‚   â”œâ”€â”€ views.py                    # Vistas del dashboard y dispositivos
â”‚   â”œâ”€â”€ forms.py                    # Formularios
â”‚   â”œâ”€â”€ admin.py                    # Panel de administraciÃ³n
â”‚   â””â”€â”€ templates/dispositivos/     # Templates principales
â”‚       â”œâ”€â”€ dashboard.html          # Dashboard principal
â”‚       â”œâ”€â”€ device_list.html        # Lista de dispositivos
â”‚       â”œâ”€â”€ device_detail.html      # Detalle de dispositivo
â”‚       â”œâ”€â”€ measurement_list.html   # Historial de mediciones
â”‚       â””â”€â”€ alert_summary.html      # Resumen de alertas
â””â”€â”€ usuarios/                       # App de autenticaciÃ³n
    â”œâ”€â”€ models.py                   # VerificationCode, UserProfile
    â”œâ”€â”€ views.py                    # Login, registro, recuperaciÃ³n
    â””â”€â”€ templates/usuarios/         # Templates de auth
        â”œâ”€â”€ login.html              # Inicio de sesiÃ³n
        â”œâ”€â”€ register.html           # Registro de empresas
        â”œâ”€â”€ password_reset.html     # Solicitar recuperaciÃ³n
        â””â”€â”€ verify_code.html        # Verificar cÃ³digo email
```

### ğŸ—„ï¸ Modelos de Datos

#### **dispositivos/models.py**

- `Organization`: Empresas registradas
- `Category`: CategorÃ­as de dispositivos (HVAC, Lighting, etc.)
- `Zone`: Zonas fÃ­sicas (Office, Warehouse, etc.)
- `Device`: Dispositivos IoT de monitoreo
- `Measurement`: Mediciones de consumo energÃ©tico
- `Alert`: Alertas del sistema
- `PasswordResetToken`: Tokens para recuperaciÃ³n de contraseÃ±a

#### **usuarios/models.py**

- `VerificationCode`: CÃ³digos de verificaciÃ³n por email
- `UserProfile`: Perfiles extendidos de usuario

## ğŸ¨ DiseÃ±o Visual

### **Estilo Frutiger Aero**

- **Colores principales**: Gradientes celeste (#87CEEB) a verde (#98FB98)
- **Efectos visuales**:
  - Backdrop blur y transparencias
  - Sombras suaves
  - Transiciones fluidas
  - Elementos flotantes animados
- **TipografÃ­a**: Segoe UI para legibilidad moderna
- **IconografÃ­a**: Emojis y sÃ­mbolos relacionados con energÃ­a/ecologÃ­a

## ğŸ”§ ConfiguraciÃ³n y Uso

### **Prerrequisitos**

```bash
Python 3.8+
Django 4.2+
```

### **InstalaciÃ³n**

```bash
# Clonar el proyecto
git clone [repositorio]
cd monitoreo

# Instalar dependencias
pip install django

# Aplicar migraciones
python manage.py makemigrations
python manage.py migrate

# Crear superusuario
python manage.py createsuperuser

# Ejecutar servidor
python manage.py runserver
```

### **ConfiguraciÃ³n de Email**

Para que funcione la verificaciÃ³n por email, configura en `settings.py`:

```python
# Email configuration para Gmail
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
EMAIL_HOST_USER = 'tu-email@gmail.com'
EMAIL_HOST_PASSWORD = 'tu-app-password'  # App password de Gmail
DEFAULT_FROM_EMAIL = 'tu-email@gmail.com'
```

### **URLs Disponibles**

```
/                    â†’ Dashboard principal
/devices/            â†’ Lista de dispositivos
/devices/<id>/       â†’ Detalle de dispositivo
/measurements/       â†’ Historial de mediciones
/alerts/             â†’ Resumen de alertas
/login/              â†’ Inicio de sesiÃ³n
/register/           â†’ Registro de empresas
/password-reset/     â†’ RecuperaciÃ³n de contraseÃ±a
/admin/              â†’ Panel de administraciÃ³n
```

## ğŸ“Š Datos de Ejemplo

El sistema incluye datos precargados para testing:

### **Organizaciones**

- Green Solutions Ltd.
- EcoTech Industries
- Sustainable Corp

### **CategorÃ­as de Dispositivos**

- HVAC (ClimatizaciÃ³n)
- Lighting (IluminaciÃ³n)
- Appliances (ElectrodomÃ©sticos)
- Security (Seguridad)

### **Zonas**

- Office (Oficina)
- Warehouse (AlmacÃ©n)
- Production (ProducciÃ³n)
- Parking (Estacionamiento)

### **Dispositivos Ejemplo**

- Smart Thermostat (HVAC)
- LED Panel Controller (Lighting)
- Industrial Refrigerator (Appliances)
- Security Camera System (Security)

## ğŸ› Problemas Conocidos y Soluciones

### **Problema: Error CSRF 403**

**Causa**: Falta el token CSRF en formularios
**SoluciÃ³n**: Verificar que todos los templates tengan `{% csrf_token %}`

### **Problema: CÃ³digo de verificaciÃ³n se reenvÃ­a**

**Causa**: JavaScript no envÃ­a correctamente el cÃ³digo de 6 dÃ­gitos
**SoluciÃ³n**: Verificar que el campo oculto `hiddenCode` se actualice correctamente

### **Problema: Usuario no se autentica**

**Causa**: Usuario creado como `is_active=False`
**SoluciÃ³n**: Activar usuario despuÃ©s de verificar email

## ğŸ”„ Estado del Desarrollo

### âœ… **Completado**

- [x] Modelos de datos con relaciones
- [x] Dashboard con mÃ©tricas
- [x] CRUD de dispositivos
- [x] Lista de mediciones
- [x] Sistema de alertas
- [x] Templates con diseÃ±o Frutiger Aero
- [x] Panel de administraciÃ³n
- [x] Datos de ejemplo

### ğŸ”„ **En Progreso**

- [ ] Sistema de autenticaciÃ³n (99% - debugging final)
- [ ] ValidaciÃ³n de cÃ³digos de verificaciÃ³n
- [ ] ProtecciÃ³n de vistas con `@login_required`

### ğŸ“‹ **Por Implementar**

- [ ] Tests unitarios
- [ ] API REST endpoints
- [ ] GrÃ¡ficos interactivos de consumo
- [ ] Notificaciones push
- [ ] ExportaciÃ³n de reportes
- [ ] Dashboard responsive mÃ³vil

## ğŸ‘¥ Roles de Usuario

### **Administrador**

- Acceso completo al panel Django admin
- GestiÃ³n de organizaciones y usuarios
- ConfiguraciÃ³n del sistema

### **Usuario Empresa**

- Acceso a dashboard de su organizaciÃ³n
- GestiÃ³n de dispositivos propios
- VisualizaciÃ³n de mediciones y alertas
- GeneraciÃ³n de reportes

## ğŸ“§ ConfiguraciÃ³n de VerificaciÃ³n por Email

### **Para Gmail (Recomendado para desarrollo)**

1. Activar verificaciÃ³n en 2 pasos en tu cuenta Google
2. Generar "ContraseÃ±a de aplicaciÃ³n" especÃ­fica
3. Usar esa contraseÃ±a en `EMAIL_HOST_PASSWORD`
4. Configurar `EMAIL_HOST_USER` con tu email de Gmail

### **Para ProducciÃ³n**

- Usar servicios como SendGrid, Mailgun o Amazon SES
- Configurar dominio propio para emails
- Implementar templates HTML para emails

## ğŸš€ Historias de Usuario Implementadas

- **HU1**: Dashboard con mÃ©tricas principales âœ…
- **HU2**: Lista de dispositivos con filtros âœ…
- **HU3**: Detalle completo de dispositivos âœ…
- **HU4**: Historial de mediciones âœ…
- **HU5**: Resumen de alertas por severidad âœ…
- **HU6**: Login funcional âœ…
- **HU7**: Registro de empresas ğŸ”„
- **HU8**: RecuperaciÃ³n de contraseÃ±a ğŸ”„

## ğŸ“ Notas de Desarrollo

### **Consideraciones TÃ©cnicas**

- Base de datos SQLite para desarrollo (cambiar a PostgreSQL en producciÃ³n)
- Campos `created_at`, `updated_at`, `deleted_at` en todos los modelos
- Soft deletes implementados donde corresponde
- Relaciones FK correctas entre modelos

### **Estilo y UX**

- DiseÃ±o Frutiger Aero consistente en todas las pÃ¡ginas
- Responsive design con breakpoints mÃ³viles
- Animaciones CSS para mejor experiencia
- Feedback visual para todas las acciones del usuario

### **Seguridad**

- ProtecciÃ³n CSRF en todos los formularios
- ValidaciÃ³n de entrada en backend
- ExpiraciÃ³n de cÃ³digos de verificaciÃ³n (10 minutos)
- ContraseÃ±as hasheadas con Django auth

## ğŸ¤ ContribuciÃ³n

Este es un proyecto acadÃ©mico para evaluaciÃ³n. Para modificaciones:

1. Fork del repositorio
2. Crear rama feature (`git checkout -b feature/nueva-funcionalidad`)
3. Commit cambios (`git commit -am 'Agregar nueva funcionalidad'`)
4. Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. Crear Pull Request

## ğŸ“„ Licencia

Proyecto acadÃ©mico - Solo para fines educativos

## ğŸ‘¨â€ğŸ’» Autor

Desarrollado como parte de evaluaciÃ³n acadÃ©mica para el curso de Backend

---

**Ãšltima actualizaciÃ³n**: Septiembre 2025  
**VersiÃ³n**: 1.0.0-beta  
**Estado**: En desarrollo activo
